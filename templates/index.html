<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PC Gaming App - Monitor your system metrics in real-time">
    <title>PC Gaming Monitor</title>
    <link rel="icon" href="{{ url_for('favicon') }}" type="image/png">
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header>
        <h1><i class="fas fa-desktop"></i> PC Gaming Monitor</h1>
        <h4>Access on your phone: <a href="http://{{ ip_address }}:5000">http://{{ ip_address }}:5000</a></h4>
    </header>
    
    <p id="app-version">App Version: Loading...</p>
    
    <div class="buttons-container">
        <button id="off" class="action-button shutdown" title="Shutdown System">
            <i class="fas fa-power-off"></i>
            <span>Shutdown</span>
        </button>
        <button id="restart" class="action-button restart" title="Restart System">
            <i class="fas fa-sync-alt"></i>
            <span>Restart</span>
        </button>
        <button id="logout" class="action-button logout" title="Logout User">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </button>
        <button id="Lock" class="action-button lock" title="Lock System">
            <i class="fas fa-lock"></i>
            <span>Lock</span>
        </button>
        <button id="exit-app" class="action-button exit" title="Close Application">
            <i class="fas fa-times-circle"></i>
            <span>Close App</span>
        </button>
    </div>

    <div id="update-message" style="display: none;" class="update-notification">
        <i class="fas fa-download"></i> 
        <strong>New version available!</strong> Click here to update now.
        <i class="fas fa-arrow-right"></i>
    </div>

    <div class="container">
        <!-- CPU Card -->
        <div class="card">
            <h2><i class="fas fa-microchip"></i> CPU</h2>
            <p>
                <i class="fas fa-tachometer-alt"></i>
                <span>Usage:</span>
                <span id="cpu-usage" class="metric-value">Loading...</span>%
            </p>
            <p>
                <i class="fas fa-clock"></i>
                <span>Current Frequency:</span>
                <span id="cpu-frequency-current" class="metric-value">Loading...</span> MHz
            </p>
            <p>
                <i class="fas fa-clock"></i>
                <span>Max Frequency:</span>
                <span id="cpu-frequency-max" class="metric-value">Loading...</span> MHz
            </p>
            <p>
                <i class="fas fa-temperature-high"></i>
                <span>Temperature:</span>
                <span id="cpu-temperature" class="metric-value">Loading...</span>°C
            </p>
        </div>

        <!-- RAM Card -->
        <div class="card">
            <h2><i class="fas fa-memory"></i> RAM</h2>
            <p>
                <i class="fas fa-tachometer-alt"></i>
                <span>Usage:</span>
                <span id="ram-usage" class="metric-value">Loading...</span>%
            </p>
            <p>
                <i class="fas fa-server"></i>
                <span>Total:</span>
                <span id="ram-total" class="metric-value">Loading...</span> GB
            </p>
            <p>
                <i class="fas fa-server"></i>
                <span>Free:</span>
                <span id="ram-free" class="metric-value">Loading...</span> GB
            </p>
            <button id="clear-cache">
                <i class="fas fa-trash-alt"></i> Clear Cache
            </button>
            <p id="loading-message" class="loading-message" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i> Please wait, clearing memory...
            </p>
        </div>

        <!-- Disk Card -->
        <div class="card">
            <h2><i class="fas fa-hdd"></i> Disk</h2>
            <p>
                <i class="fas fa-tachometer-alt"></i>
                <span>Usage:</span>
                <span id="disk-usage" class="metric-value">Loading...</span>%
            </p>
            <p>
                <i class="fas fa-hdd"></i>
                <span>Free Space:</span>
                <span id="disk-free" class="metric-value">Loading...</span> GB
            </p>
            <p>
                <i class="fas fa-arrow-circle-down"></i>
                <span>Read Speed:</span>
                <span id="disk-read" class="metric-value">Loading...</span> MB
            </p>
            <p>
                <i class="fas fa-arrow-circle-up"></i>
                <span>Write Speed:</span>
                <span id="disk-write" class="metric-value">Loading...</span> MB
            </p>
            <button id="clear-temp-files">
                <i class="fas fa-trash-alt"></i> Clear Temp Files
            </button>
            <p id="disk-loading-message" class="loading-message" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i> Please wait, clearing temporary files...
            </p>
        </div>

        <!-- GPU Card -->
        <div class="card">
            <h2><i class="fas fa-video"></i> GPU</h2>
            <p>
                <i class="fas fa-tag"></i>
                <span>Name:</span>
                <span id="gpu-name" class="metric-value">Loading...</span>
            </p>
            <p>
                <i class="fas fa-temperature-high"></i>
                <span>Temperature:</span>
                <span id="gpu-temperature" class="metric-value">Loading...</span>°C
            </p>
            <p>
                <i class="fas fa-tachometer-alt"></i>
                <span>Utilization:</span>
                <span id="gpu-utilization" class="metric-value">Loading...</span>%
            </p>
            <p>
                <i class="fas fa-memory"></i>
                <span>Memory Used:</span>
                <span id="gpu-memory-used" class="metric-value">Loading...</span> MB
            </p>
            <p>
                <i class="fas fa-memory"></i>
                <span>Memory Total:</span>
                <span id="gpu-memory-total" class="metric-value">Loading...</span> MB
            </p>
        </div>

        <!-- Internet Speed Card -->
        <div class="card">
            <h2><i class="fas fa-network-wired"></i> Internet Speed</h2>
            <p>
                <i class="fas fa-arrow-circle-down"></i>
                <span>Download:</span>
                <span id="down-speed" class="metric-value">—</span> Mbps
            </p>
            <p>
                <i class="fas fa-arrow-circle-up"></i>
                <span>Upload:</span>
                <span id="up-speed" class="metric-value">—</span> Mbps
            </p>
            <p>
                <i class="fas fa-tachometer-alt"></i>
                <span>Ping:</span>
                <span id="ping" class="metric-value">—</span> ms
            </p>
            <button id="start-speed-test">
                <i class="fas fa-play-circle"></i> Start Speed Test
            </button>
            <p id="speed-test" class="loading-message" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i> Please wait, testing the connection...
            </p>
        </div>

        <!-- Media Controls Card -->
        <div class="card">
            <h2><i class="fas fa-volume-up"></i> Media Controls</h2>
            <div class="media-buttons-container">
                <button onclick="sendCommand('prev_track')" title="Previous Track">
                    <i class="fas fa-backward"></i>
                </button>
                <button onclick="sendCommand('play_pause')" title="Play/Pause">
                    <i class="fas fa-play"></i>
                </button>
                <button onclick="sendCommand('next_track')" title="Next Track">
                    <i class="fas fa-forward"></i>
                </button>
            </div>
            <h3 style="margin-top: 1.5rem; margin-bottom: 1rem; font-size: 1.1rem; color: var(--text-secondary);">
                <i class="fas fa-sliders-h"></i> Volume Controls
            </h3>
            <div id="volume-controls-container" class="volume-controls-container">
                <p style="text-align: center; color: var(--text-muted);">
                    <i class="fas fa-spinner fa-spin"></i> Loading audio sessions...
                </p>
            </div>
        </div>

        <!-- Process Manager Card -->
        <div class="card">
            <h2><i class="fas fa-tasks"></i> Process Manager</h2>
            <div style="margin-bottom: 1rem; display: flex; gap: 10px; align-items: center;">
                <button id="sort-cpu" class="sort-button active" onclick="processManager.sortBy('cpu')">
                    <i class="fas fa-microchip"></i> Sort by CPU
                </button>
                <button id="sort-memory" class="sort-button" onclick="processManager.sortBy('memory')">
                    <i class="fas fa-memory"></i> Sort by Memory
                </button>
            </div>
            <div id="processes-list" style="max-height: 400px; overflow-y: auto;">
                <p style="text-align: center; color: var(--text-muted);">
                    <i class="fas fa-spinner fa-spin"></i> Loading processes...
                </p>
            </div>
        </div>

        <!-- System Information Card -->
        <div class="card">
            <h2><i class="fas fa-info-circle"></i> System Information</h2>
            <div id="system-info-content">
                <p style="text-align: center; color: var(--text-muted);">
                    <i class="fas fa-spinner fa-spin"></i> Loading system information...
                </p>
            </div>
        </div>

        <!-- Network Monitor Card -->
        <div class="card">
            <h2><i class="fas fa-network-wired"></i> Network Monitor</h2>
            <div id="network-stats-content">
                <p>
                    <i class="fas fa-arrow-circle-up"></i>
                    <span>Upload Speed:</span>
                    <span id="network-upload-speed" class="metric-value">—</span> Mbps
                </p>
                <p>
                    <i class="fas fa-arrow-circle-down"></i>
                    <span>Download Speed:</span>
                    <span id="network-download-speed" class="metric-value">—</span> Mbps
                </p>
                <p>
                    <i class="fas fa-server"></i>
                    <span>Total Sent:</span>
                    <span id="network-sent" class="metric-value">—</span> MB
                </p>
                <p>
                    <i class="fas fa-server"></i>
                    <span>Total Received:</span>
                    <span id="network-received" class="metric-value">—</span> MB
                </p>
                <details style="margin-top: 1rem;">
                    <summary style="cursor: pointer; font-weight: bold; color: var(--text-secondary);">
                        <i class="fas fa-list"></i> Active Connections
                    </summary>
                    <div id="network-connections-list" style="margin-top: 1rem; max-height: 300px; overflow-y: auto;">
                        <p style="text-align: center; color: var(--text-muted);">
                            <i class="fas fa-spinner fa-spin"></i> Loading connections...
                        </p>
                    </div>
                </details>
            </div>
        </div>

        <!-- Remote Control Section -->
        <div class="card" style="grid-column: 1 / -1;">
            <h2><i class="fas fa-mobile-alt"></i> Remote Control</h2>
            
                <!-- Remote Desktop -->
                <div class="remote-control-item" style="grid-column: 1 / -1;">
                    <h3><i class="fas fa-desktop"></i> Remote Desktop</h3>
                    <div style="margin-bottom: 10px;">
                        <button id="start-remote-desktop" class="remote-button" style="width: 100%; margin-bottom: 5px;">
                            <i class="fas fa-play"></i> Start Remote Desktop
                        </button>
                        <button id="stop-remote-desktop" class="remote-button" style="width: 100%; background: rgba(220,53,69,0.8); display: none;">
                            <i class="fas fa-stop"></i> Stop Remote Desktop
                        </button>
                    </div>
                    <div id="remote-desktop-container" style="display: none;">
                        <div id="remote-desktop-viewer" style="position: relative; background: #000; border-radius: 8px; overflow: hidden; max-width: 100%; margin-bottom: 15px;">
                            <canvas id="remote-desktop-canvas" style="width: 100%; height: auto; display: block; cursor: crosshair;"></canvas>
                            <div id="remote-desktop-status" style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem;">
                                <i class="fas fa-circle" style="color: #ff4444;"></i> Connecting...
                            </div>
                        </div>
                        
                        <!-- Modern Touchpad Controller -->
                        <div class="touchpad-controller">
                            <div class="touchpad-header">
                                <div class="cursor-info">
                                    <i class="fas fa-mouse-pointer"></i>
                                    <span>Cursor: <span id="remote-cursor-position">0, 0</span></span>
                                </div>
                                <div class="touchpad-mode">
                                    <span id="touchpad-mode-indicator">Move</span>
                                </div>
                            </div>
                            
                            <!-- Main Touchpad -->
                            <div id="touchpad-area" class="touchpad-area">
                                <div id="touchpad-indicator" class="touchpad-indicator"></div>
                                <div class="touchpad-center-dot"></div>
                            </div>
                            
                            <!-- Control Zones -->
                            <div class="touchpad-controls">
                                <!-- Left Side - Click Zones -->
                                <div class="touchpad-side-controls">
                                    <div id="touchpad-left-click" class="touchpad-click-zone left-click" title="Left Click">
                                        <i class="fas fa-hand-pointer"></i>
                                        <span>Left</span>
                                    </div>
                                    <div id="touchpad-right-click" class="touchpad-click-zone right-click" title="Right Click">
                                        <i class="fas fa-hand-pointer"></i>
                                        <span>Right</span>
                                    </div>
                                </div>
                                
                                <!-- Center - Mode Toggle -->
                                <div class="touchpad-center-controls">
                                    <div id="touchpad-mode-toggle" class="touchpad-mode-button" title="Toggle Mode">
                                        <i class="fas fa-exchange-alt"></i>
                                        <span id="mode-text">Move</span>
                                    </div>
                                </div>
                                
                                <!-- Right Side - Scroll Zones -->
                                <div class="touchpad-side-controls">
                                    <div id="touchpad-scroll-up" class="touchpad-scroll-zone scroll-up" title="Scroll Up">
                                        <i class="fas fa-chevron-up"></i>
                                        <span>Up</span>
                                    </div>
                                    <div id="touchpad-scroll-down" class="touchpad-scroll-zone scroll-down" title="Scroll Down">
                                        <i class="fas fa-chevron-down"></i>
                                        <span>Down</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Keyboard Input -->
                            <div class="touchpad-keyboard">
                                <input type="text" id="remote-keyboard-input" class="touchpad-keyboard-input" placeholder="Type text or key name...">
                                <button id="remote-send-key" class="touchpad-send-button">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- File Explorer -->
                <div class="remote-control-item" style="grid-column: 1 / -1;">
                    <h3><i class="fas fa-folder-open"></i> File Explorer</h3>
                    <div class="file-explorer-controls">
                        <div class="file-explorer-nav">
                            <button id="file-explorer-back" class="remote-button" title="Go Back">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <button id="file-explorer-home" class="remote-button" title="Home Directory">
                                <i class="fas fa-home"></i>
                            </button>
                        </div>
                        <div class="file-explorer-path-container">
                            <input type="text" id="file-explorer-path" value="~" class="file-explorer-path-input" placeholder="Enter path...">
                            <button id="file-explorer-go" class="remote-button" title="Go to Path">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                    <div id="file-explorer-breadcrumb" class="file-explorer-breadcrumb">
                        <span class="breadcrumb-label">Current Path:</span>
                        <span id="breadcrumb-path" class="breadcrumb-path">~</span>
                    </div>
                    <div id="file-explorer-list" class="file-explorer-list">
                        <p style="text-align: center; color: var(--text-muted);">
                            <i class="fas fa-spinner fa-spin"></i> Loading files...
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/script.js"></script>
</body>
</html>
